# Cursor Rules for Bandit Tickets Web

## Component Naming
- **Always use PascalCase for component file names** (e.g., `HomePage.vue`, `MicrositeLayout.vue`, `UserProfile.vue`)
- Component file names should match their component name in PascalCase
- When referencing components in templates, use PascalCase (e.g., `<HomePage />`, `<MicrositeLayout />`)

## Vue/Nuxt Best Practices
- **Always use Options API for Vue components** – do not use Composition API or `<script setup>`
- Use `<script lang="ts">` with `export default defineComponent({ ... })` and Options API: `name`, `components`, `props`, `data`, `computed`, `methods`, etc.
- Do not use `ref()`, `reactive()`, `computed()` from Composition API; use `data()`, `computed: { }`, `methods: { }` instead
- Use TypeScript for type safety
- Follow Nuxt 3 conventions for auto-imports (components, composables, utils)

## CSS/BEM Naming Convention
- **Do not use `scoped` in component styles** – each component uses a unique BEM block name (e.g. `ArtistEventsPage-hero`, `EventCard-title`), so classes already scope the styles; use global `<style lang="scss">` and avoid `:deep()`
- **Always use BEM (Block Element Modifier) pattern for CSS classes**
- Format: `ComponentName-element-subelement--modifier`
- Example: `HomePage-hero-main-title--active`
- Each HTML element should have at least one BEM class for styling
- Block: component name in PascalCase (e.g., `HomePage`, `MicrositeLayout`)
- Element: descriptive element name in kebab-case (e.g., `title`, `main-title`)
- Modifier: optional state or variant, prefixed with `--` (e.g., `--active`, `--disabled`)

### SCSS nesting with BEM
- **Nest BEM elements and modifiers inside the block using `&-`**
- The block root is the component class (e.g. `.EventCard`, `.EventsGrid`). All elements and sub-elements are nested under it with `&-element`, `&-element-subelement`, `&-element--modifier`.
- Example:
```scss
.EventCard {
  &-image-wrap { }
  &-image {
    &-wrap { }
    &-placeholder { }
  }
  &-body { }
  &-title { }
}
```
- Do not repeat the block name in flat classes; nest under the block so the SCSS reflects the BEM structure.

## Colors
- **Always prefer using color variables from `assets/scss/partials/theme.scss`**
- When adding a color, first check if there's an appropriate variable available:
  - **Neutral/Gray scale**: Use `--color-N0` through `--color-N100` (N0 is darkest, N100 is lightest in light mode)
  - **Primary scale**: Use `--color-primary-0` through `--color-primary-100` (0 is darkest, 100 is lightest, 50 is base)
  - Also check for semantic tokens like `--color-text`, `--color-background`, `--color-border`, etc.
- Only use hardcoded hex/rgb colors if no suitable variable exists in the theme
- Use CSS custom properties syntax: `var(--color-N50)` or `var(--color-primary-50)`

## Code Style
- Use 2 spaces for indentation
- Use single quotes for strings in JavaScript/TypeScript
- Use double quotes for HTML attributes
- Always include closing tags in templates
- **Never use `scoped` in `<style>` tags** – we use BEM and a unique block name per component (e.g. `ArtistEventsPage`, `EventCard`), so styles are already isolated by class; avoid `:deep()` and keep styles global
- **Always use `lang="scss"` in `<style>` tags** - all styles should use SCSS syntax
- **Always use relative paths for imports** - use `./` or `../` instead of `~` or `~/` alias
- **Never use path aliases** - always use relative imports (e.g., `../services/translation.service` instead of `~/services/translation.service`)
- **Translation keys must use snake_case** - all translation keys in i18n JSON files should use snake_case (e.g., `select_tickets`, `event_details`, `order_number`)

## File Structure
- Components go in `components/` directory
- Pages go in `pages/` directory
- Composables go in `composables/` directory
- Server API routes go in `server/api/` directory

## Development
- Local development URL: `http://devel.bandit.tickets:3000/`
- Application runs on port 3000
- Use `docker-compose up` to start the development environment

## Integration Events (Symfony Messenger)
- If a **transport consumer** (queue) runs but **does not trigger the expected subscriber/handler**, ensure the **integration event** is mapped in `@core/src/Shared/Infrastructure/Bus/Message/Factory/FullyQualifiedClassNameMessageFactory.php` so the message can be deserialized to the correct PHP class.

## Doctrine ORM Mappings
- **Doctrine mappings are auto-discovered and configured in the Kernel**
- The Doctrine ORM mapping configuration is handled automatically in `src/Shared/Infrastructure/Symfony/Kernel.php`
- Do not manually add Doctrine mappings to `config/packages/doctrine.yaml` - they are discovered automatically from XML files in `Infrastructure/Persistence/Doctrine/` directories
- The Kernel's `configureDoctrineMappings` method handles all mapping discovery and configuration

